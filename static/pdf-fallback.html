<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–ø–∏—Å–µ–π (–ê–≤–∞—Ä–∏–π–Ω—ã–π —Ä–µ–∂–∏–º)</title>
    
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ pdfmake -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        h1, h2 {
            color: #333;
        }
        .header {
            background-color: #ff4b4b;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        .section {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .options-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 8px;
        }
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }
        button {
            background-color: #ff4b4b;
            color: white;
            border: none;
            padding: 12px 24px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 8px 4px;
            cursor: pointer;
            border-radius: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #e04141;
        }
        .error-message {
            color: #f44336;
            font-weight: bold;
            padding: 15px;
            border-radius: 4px;
            background-color: #ffebee;
            display: none;
            margin-bottom: 15px;
        }
        .info {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
        input[type="radio"] {
            margin-right: 8px;
        }
        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .loading {
            text-align: center;
            margin: 20px 0;
            display: none;
        }
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #ff4b4b;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .return-link {
            text-align: center;
            margin-top: 20px;
        }
        .return-link a {
            color: #666;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–ø–∏—Å–µ–π</h1>
        <p>üö® –ê–í–ê–†–ò–ô–ù–´–ô –†–ï–ñ–ò–ú - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –±—Ä–∞—É–∑–µ—Ä–∞ üö®</p>
    </div>
    
    <div class="error-message" id="error-box"></div>
    
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>–°–æ–∑–¥–∞–Ω–∏–µ PDF...</p>
    </div>
    
    <div class="section">
        <h2>–í–∞—Ä–∏–∞–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:</h2>
        <div class="options-group">
            <label>
                <input type="radio" name="fill-type" value="all" id="fill-all">
                –ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
            </label>
            <label>
                <input type="radio" name="fill-type" value="first_letter" id="fill-first" checked>
                –†–∞–∑–º–Ω–æ–∂–∏—Ç—å –ø–µ—Ä–≤—É—é –±—É–∫–≤—É –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ
            </label>
            <label>
                <input type="radio" name="fill-type" value="one_line" id="fill-line">
                –†–∞–∑–º–Ω–æ–∂–∏—Ç—å –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –Ω–∞ –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            </label>
        </div>
    </div>
    
    <div class="section">
        <h2>–¢–µ–∫—Å—Ç –ø—Ä–æ–ø–∏—Å–∏:</h2>
        <textarea id="text-content">–∞ –∞ –∞ –∞ –∞ –∞ –∞ –∞ –∞ –∞ –∞
–± –± –± –± –± –± –± –± –± –± –±
–≤ –≤ –≤ –≤ –≤ –≤ –≤ –≤ –≤ –≤ –≤</textarea>
        <div class="info">–ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –ø—É—Å—Ç—ã–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, –∞ –¥–ª–∏–Ω–Ω—ã–µ –ø–µ—Ä–µ–Ω–µ—Å—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</div>
    </div>
    
    <div class="section">
        <h2>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:</h2>
        <div class="options-group">
            <label>–†–∞–∑–º–µ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:</label>
            <label>
                <input type="radio" name="page-layout" value="lines" checked>
                –õ–∏–Ω–∏–∏
            </label>
            <label>
                <input type="radio" name="page-layout" value="lines_oblique">
                –õ–∏–Ω–∏–∏ —Å –Ω–∞–∫–ª–æ–Ω–æ–º
            </label>
            <label>
                <input type="radio" name="page-layout" value="cells">
                –ö–ª–µ—Ç–∫–∏
            </label>
        </div>
        
        <div class="options-group">
            <label>–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã:</label>
            <label>
                <input type="radio" name="page-orientation" value="portrait" checked>
                –ü–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è
            </label>
            <label>
                <input type="radio" name="page-orientation" value="landscape">
                –ê–ª—å–±–æ–º–Ω–∞—è
            </label>
        </div>
        
        <div class="options-group">
            <label>–°—Ç–∏–ª—å —à—Ä–∏—Ñ—Ç–∞:</label>
            <label>
                <input type="radio" name="font-type" value="black" checked>
                –ß–µ—Ä–Ω—ã–π
            </label>
            <label>
                <input type="radio" name="font-type" value="gray">
                –°–µ—Ä—ã–π
            </label>
            <label>
                <input type="radio" name="font-type" value="punktir">
                –ü—É–Ω–∫—Ç–∏—Ä–Ω—ã–π
            </label>
        </div>
        
        <div class="options-group">
            <label for="student-name">–ò–º—è —É—á–µ–Ω–∏–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
            <input type="text" id="student-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è —É—á–µ–Ω–∏–∫–∞">
        </div>
    </div>
    
    <div class="section">
        <div class="actions">
            <button id="preview-button">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä PDF</button>
            <button id="generate-button">–°–∫–∞—á–∞—Ç—å PDF</button>
        </div>
    </div>
    
    <div class="return-link">
        <a href="/">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞</a>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ pdfMake
            if (typeof pdfMake === 'undefined') {
                showError('–û—à–∏–±–∫–∞: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ pdfMake –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
                return;
            }
            
            const previewButton = document.getElementById('preview-button');
            const generateButton = document.getElementById('generate-button');
            const errorBox = document.getElementById('error-box');
            const loadingElement = document.getElementById('loading');
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–∫–∏
            function showError(message) {
                console.error('–û–®–ò–ë–ö–ê:', message);
                errorBox.textContent = message;
                errorBox.style.display = 'block';
                setTimeout(() => {
                    errorBox.style.display = 'none';
                }, 5000);
            }
            
            // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            function setLoading(isLoading) {
                loadingElement.style.display = isLoading ? 'block' : 'none';
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏
            function getSelectedRadioValue(name) {
                const radio = document.querySelector(`input[name="${name}"]:checked`);
                return radio ? radio.value : '';
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è PDF
            function createPDF(isPreview) {
                try {
                    setLoading(true);
                    
                    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                    const fillType = getSelectedRadioValue('fill-type');
                    const text = document.getElementById('text-content').value;
                    const pageLayout = getSelectedRadioValue('page-layout');
                    const fontType = getSelectedRadioValue('font-type');
                    const pageOrientation = getSelectedRadioValue('page-orientation');
                    const studentName = document.getElementById('student-name').value;
                    
                    // –°–æ–∑–¥–∞–µ–º PDF –¥–æ–∫—É–º–µ–Ω—Ç
                    const docDefinition = generatePdfDefinition(
                        text,
                        fillType,
                        pageLayout,
                        fontType,
                        pageOrientation,
                        studentName,
                        isPreview
                    );
                    
                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º PDF
                    setTimeout(() => {
                        try {
                            if (isPreview) {
                                pdfMake.createPdf(docDefinition).open();
                            } else {
                                pdfMake.createPdf(docDefinition).download(`propisi_${new Date().toISOString().slice(0,10)}.pdf`);
                            }
                        } catch (error) {
                            showError(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PDF: ${error.message}`);
                        } finally {
                            setLoading(false);
                        }
                    }, 100);
                } catch (error) {
                    showError(`–û—à–∏–±–∫–∞: ${error.message}`);
                    setLoading(false);
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è PDF
            function generatePdfDefinition(text, fillType, pageLayout, fontType, pageOrientation, studentName, isPreview) {
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const pageSize = 'A4';
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
                const docDefinition = {
                    pageSize: pageSize,
                    pageOrientation: pageOrientation,
                    pageMargins: [40, 40, 40, 40],
                    content: [],
                    styles: {
                        header: {
                            fontSize: 18,
                            bold: true,
                            margin: [0, 0, 0, 10]
                        },
                        student: {
                            fontSize: 12,
                            margin: [0, 5, 0, 15]
                        },
                        date: {
                            fontSize: 10,
                            alignment: 'right',
                            margin: [0, 0, 0, 15]
                        },
                        note: {
                            fontSize: 10,
                            color: 'red',
                            alignment: 'right',
                            margin: [0, 0, 0, 10]
                        }
                    }
                };
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
                docDefinition.content.push({ text: '–ü—Ä–æ–ø–∏—Å—å –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–∏—Å—å–º–∞', style: 'header' });
                
                // –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä, –¥–æ–±–∞–≤–ª—è–µ–º –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫
                if (isPreview) {
                    docDefinition.content.push({ text: '–ü–†–ï–î–ü–†–û–°–ú–û–¢–†', style: 'note' });
                }
                
                docDefinition.content.push({ 
                    text: '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –∞–≤–∞—Ä–∏–π–Ω–æ–º —Ä–µ–∂–∏–º–µ', 
                    style: 'note' 
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–º—è —É—á–µ–Ω–∏–∫–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
                if (studentName) {
                    docDefinition.content.push({ text: `–£—á–µ–Ω–∏–∫: ${studentName}`, style: 'student' });
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞—Ç—É
                const today = new Date().toLocaleDateString('ru-RU');
                docDefinition.content.push({ text: `–î–∞—Ç–∞: ${today}`, style: 'date' });
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–∏–ª—è
                let textColor = '#000000'; // –ß–µ—Ä–Ω—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                switch (fontType) {
                    case 'gray':
                        textColor = '#808080'; // –°–µ—Ä—ã–π
                        break;
                    case 'punktir':
                        textColor = '#B4B4B4'; // –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π
                        break;
                }
                
                // –°–æ–∑–¥–∞–µ–º —Ä–∞–∑–º–µ—Ç–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const canvas = {
                    type: 'canvas',
                    canvas: []
                };
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–∏–Ω–∏–π
                // –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –ø—É–Ω–∫—Ç–∞—Ö
                const pageWidth = pageOrientation === 'landscape' ? 841.89 : 595.28;
                const pageHeight = pageOrientation === 'landscape' ? 595.28 : 841.89;
                const marginLeft = 40;
                const marginTop = 130; // –ú–µ—Å—Ç–æ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞
                const contentWidth = pageWidth - 2 * marginLeft;
                const contentHeight = pageHeight - marginTop - 40;
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∞—Å–Ω–æ–π –ª–∏–Ω–∏–∏ —Å–ª–µ–≤–∞
                canvas.canvas.push({
                    type: 'line',
                    x1: marginLeft + 20,
                    y1: marginTop,
                    x2: marginLeft + 20,
                    y2: marginTop + contentHeight,
                    lineWidth: 1,
                    lineColor: 'red'
                });
                
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ª–∏–Ω–∏–π
                const lineHeight = 25;
                let currentY = marginTop;
                
                while (currentY <= marginTop + contentHeight) {
                    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–∏–Ω–∏—è
                    canvas.canvas.push({
                        type: 'line',
                        x1: marginLeft,
                        y1: currentY,
                        x2: marginLeft + contentWidth,
                        y2: currentY,
                        lineWidth: 0.5,
                        lineColor: '#969696'
                    });
                    
                    currentY += lineHeight;
                }
                
                // –î–ª—è –∫–ª–µ—Ç–æ–∫ –¥–æ–±–∞–≤–ª—è–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏
                if (pageLayout === 'cells') {
                    const cellSize = lineHeight;
                    const cols = Math.floor(contentWidth / cellSize);
                    
                    for (let i = 0; i <= cols; i++) {
                        canvas.canvas.push({
                            type: 'line',
                            x1: marginLeft + i * cellSize,
                            y1: marginTop,
                            x2: marginLeft + i * cellSize,
                            y2: marginTop + contentHeight,
                            lineWidth: 0.5,
                            lineColor: '#B4B4B4'
                        });
                    }
                }
                
                // –î–ª—è –∫–æ—Å—ã—Ö –ª–∏–Ω–∏–π
                if (pageLayout === 'lines_oblique') {
                    const step = 20;
                    const angle = 60; // –≥—Ä–∞–¥—É—Å—ã
                    const angleInRadians = angle * Math.PI / 180;
                    
                    for (let x = marginLeft; x <= marginLeft + contentWidth + contentHeight; x += step) {
                        canvas.canvas.push({
                            type: 'line',
                            x1: x,
                            y1: marginTop,
                            x2: x - contentHeight / Math.tan(angleInRadians),
                            y2: marginTop + contentHeight,
                            lineWidth: 0.2,
                            lineColor: '#D0D0D0'
                        });
                    }
                }
                
                docDefinition.content.push(canvas);
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
                const lines = text.split('\n');
                const textItems = [];
                
                // –û—Ç—Å—Ç—É–ø –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –æ—Ç –ª–µ–≤–æ–≥–æ –∫—Ä–∞—è –∏ –æ—Ç –≤–µ—Ä—Ö–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const textMarginLeft = marginLeft + 30; // –ü–æ—Å–ª–µ –∫—Ä–∞—Å–Ω–æ–π –ª–∏–Ω–∏–∏
                const textMarginTop = marginTop - 10; // –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –≤–≤–µ—Ä—Ö –æ—Ç –ª–∏–Ω–∏–∏
                
                if (fillType === 'first_letter') {
                    // –†–∞–∑–º–Ω–æ–∂–∞–µ–º –ø–µ—Ä–≤—É—é –±—É–∫–≤—É –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ
                    lines.forEach((line, index) => {
                        if (!line.trim()) return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
                        
                        const firstChar = line[0] || '';
                        if (firstChar) {
                            const repeatedText = firstChar.repeat(30);
                            textItems.push({
                                text: repeatedText,
                                absolutePosition: { 
                                    x: textMarginLeft, 
                                    y: textMarginTop + index * lineHeight 
                                },
                                color: textColor
                            });
                        }
                    });
                } else if (fillType === 'one_line') {
                    // –†–∞–∑–º–Ω–æ–∂–∞–µ–º –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É –Ω–∞ –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    if (lines[0] && lines[0].trim()) {
                        const firstLine = lines[0].trim();
                        const maxLines = Math.floor(contentHeight / lineHeight);
                        
                        for (let i = 0; i < maxLines; i++) {
                            textItems.push({
                                text: firstLine,
                                absolutePosition: { 
                                    x: textMarginLeft, 
                                    y: textMarginTop + i * lineHeight 
                                },
                                color: textColor
                            });
                        }
                    }
                } else {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∫–∞–∫ –µ—Å—Ç—å
                    lines.forEach((line, index) => {
                        if (!line.trim()) return; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
                        
                        textItems.push({
                            text: line,
                            absolutePosition: { 
                                x: textMarginLeft, 
                                y: textMarginTop + index * lineHeight 
                            },
                            color: textColor
                        });
                    });
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç
                textItems.forEach(item => {
                    docDefinition.content.push(item);
                });
                
                return docDefinition;
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
            previewButton.addEventListener('click', function() {
                createPDF(true);
            });
            
            generateButton.addEventListener('click', function() {
                createPDF(false);
            });
        });
    </script>
</body>
</html> 